<?xml version="1.0" encoding="UTF-8"?>
<robot xmlns:xacro="http://wiki.ros.org/xacro">
  <xacro:include filename="$(find my_hardware_interface)/urdf/common.xacro" />
  
  <xacro:macro name="rrbot" params="prefix parent *origin">
    
    <!-- 英雄機器人Links -->
    <link name="${prefix}base_link">
      <inertial>
        <origin xyz="0.000276138738735866 0.00564807973459863 0.0606576860440764" rpy="0 0 0" />
        <mass value="8.78184637370999" />
        <inertia ixx="0.0148401995915169" ixy="0.000108738329559126" ixz="9.56360986869471E-05" iyy="0.0486787597290484" iyz="-5.79850122096404E-06" izz="0.0557970041196964" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///$(find my_hardware_interface)/meshes/hero/base_link.STL" />
        </geometry>
        <material name="">
          <color rgba="1 1 1 1" />
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///$(find my_hardware_interface)/meshes/hero/base_link.STL" />
        </geometry>
      </collision>
    </link>

    <link name="${prefix}yaw_link">
      <inertial>
        <origin xyz="-0.021742157944887 0.00267307516394979 0.073861518799458" rpy="0 0 0" />
        <mass value="0.28719249337078" />
        <inertia ixx="0.000506616303281996" ixy="8.5370250851231E-06" ixz="7.95180991696996E-05" iyy="0.00059114947186763" iyz="-7.95528226323097E-06" izz="9.79994345641336E-05" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///$(find my_hardware_interface)/meshes/hero/yaw_link.STL" />
        </geometry>
        <material name="StoglRobotics/DarkGrey"/>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///$(find my_hardware_interface)/meshes/hero/yaw_link.STL" />
        </geometry>
      </collision>
    </link>

    <link name="${prefix}pitch_link">
      <inertial>
        <origin xyz="-0.00916934145870887 -0.00928618985529435 0.0240584344921287" rpy="0 0 0" />
        <mass value="2.16161612754808" />
        <inertia ixx="0.00188819608033588" ixy="1.90170138375831E-05" ixz="7.20532483480358E-05" iyy="0.00273782224519966" iyz="1.66613979109365E-06" izz="0.00321725364702273" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///$(find my_hardware_interface)/meshes/hero/pitch_link.STL" />
        </geometry>
        <material name="StoglRobotics/LightGrey"/>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///$(find my_hardware_interface)/meshes/hero/pitch_link.STL" />
        </geometry>
      </collision>
    </link>

    <!-- 相機Link -->
    <link name="${prefix}cam0_link"/>

    <!-- 摩擦輪Links -->
    <link name="${prefix}friction_wheel_lf_link">
      <xacro:default_inertial/>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///$(find my_hardware_interface)/meshes/hero/friction_wheel_lf_link.STL" />
        </geometry>
        <material name="StoglRobotics/DarkGrey"/>
      </visual>
    </link>
    
    <!-- 其他摩擦輪 -->
    <link name="${prefix}friction_wheel_lb_link">
      <xacro:default_inertial/>
      <visual>
        <geometry>
          <mesh filename="file:///$(find my_hardware_interface)/meshes/hero/friction_wheel_lb_link.STL" />
        </geometry>
        <material name="StoglRobotics/DarkGrey"/>
      </visual>
    </link>
    
    <link name="${prefix}friction_wheel_rf_link">
      <xacro:default_inertial/>
      <visual>
        <geometry>
          <mesh filename="file:///$(find my_hardware_interface)/meshes/hero/friction_wheel_rf_link.STL" />
        </geometry>
        <material name="StoglRobotics/DarkGrey"/>
      </visual>
    </link>
    
    <link name="${prefix}friction_wheel_rb_link">
      <xacro:default_inertial/>
      <visual>
        <geometry>
          <mesh filename="file:///$(find my_hardware_interface)/meshes/hero/friction_wheel_rb_link.STL" />
        </geometry>
        <material name="StoglRobotics/DarkGrey"/>
      </visual>
    </link>

    <!-- Joints -->
    <joint name="${prefix}base_joint" type="fixed">
      <xacro:insert_block name="origin" />
      <parent link="${parent}" />
      <child link="${prefix}base_link" />
    </joint>

    <!-- Yaw關節 - 對應ros2_control中的yaw_joint -->
    <joint name="${prefix}yaw_joint" type="continuous">
      <origin xyz="0 0 0.216499999999877" rpy="0 0 0" />
      <parent link="${prefix}base_link" />
      <child link="${prefix}yaw_link" />
      <axis xyz="0 0 1" />
    </joint>

    <!-- Pitch關節 - 對應ros2_control中的pitch_joint -->
    <joint name="${prefix}pitch_joint" type="continuous">
      <origin xyz="0.00383117201995245 0.000563252350000402 0.144999999999997" rpy="0 0 0" />
      <parent link="${prefix}yaw_link" />
      <child link="${prefix}pitch_link" />
      <axis xyz="0 -1 0" />
    </joint>

    <!-- 相機關節 -->
<joint name="${prefix}cam0_joint" type="fixed">
  <origin xyz="0.0898857089666096 -0.000941658027797158 0.107797961620051" rpy="0 0 0" />
  <parent link="${prefix}pitch_link" />
  <child link="${prefix}cam0_link" />
</joint>

<!--光學frame -->
<link name="${prefix}camera_optical_frame"/>
<joint name="${prefix}camera_optical_joint" type="fixed">
  <origin xyz="0 0 0" rpy="${-pi/2} 0 ${-pi/2}" />
  <parent link="${prefix}cam0_link" />
  <child link="${prefix}camera_optical_frame" />
</joint>


 


    <!-- 摩擦輪關節 - 對應ros2_control中的friction_wheel1-4 -->
    <joint name="${prefix}friction_wheel1_joint" type="continuous">
      <origin xyz="0.103433768203839 0.048100339443673 0.011805507063491" rpy="0 0 0" />
      <parent link="${prefix}pitch_link" />
      <child link="${prefix}friction_wheel_lf_link" />
      <axis xyz="0 0 -1" />
    </joint>

    <joint name="${prefix}friction_wheel2_joint" type="continuous">
      <origin xyz="0.0364337682038387 0.0481003394436472 0.0118055070632364" rpy="0 0 0" />
      <parent link="${prefix}pitch_link" />
      <child link="${prefix}friction_wheel_lb_link" />
      <axis xyz="0 0 -1" />
    </joint>

    <joint name="${prefix}friction_wheel3_joint" type="continuous">
      <origin xyz="0.103433768203875 -0.0498996605563272 0.0118055070634907" rpy="0 0 0" />
      <parent link="${prefix}pitch_link" />
      <child link="${prefix}friction_wheel_rf_link" />
      <axis xyz="0 0 -1" />
    </joint>

    <joint name="${prefix}friction_wheel4_joint" type="continuous">
      <origin xyz="0.0364337682038749 -0.0498996605563519 0.011805507063236" rpy="0 0 0" />
      <parent link="${prefix}pitch_link" />
      <child link="${prefix}friction_wheel_rb_link" />
      <axis xyz="0 0 -1" />
    </joint>

  </xacro:macro>
</robot>

